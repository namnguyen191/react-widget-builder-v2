import{e as _,A as o,B as j,D as g,h as v,j as t,I as D,q as h,t as m,E,F as J,a as c,o as y,H as R,K as O,L as T,M as b,w as A}from"./index-09c91d95.js";import{D as k,d as B,a as N,b as V,c as z}from"./DataObject-b3853ae4.js";import{C as u,F,R as p}from"./CodeEditor-7ceffbad.js";const C="45vw",I=_("div")(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(0,1),...e.mixins.toolbar,justifyContent:"flex-start"})),$=e=>{const{isOpen:s,onCloseClick:a}=e,n=o(j),r=g(),f=v(),i=m(d=>{d&&r(E(d))},1e3);return t.jsxs(k,{sx:{width:C,flexShrink:0,"& .MuiDrawer-paper":{width:C}},variant:"persistent",anchor:"right",open:s,children:[t.jsx(I,{children:t.jsx(D,{onClick:a,children:f.direction==="rtl"?t.jsx(B,{}):t.jsx(N,{})})}),t.jsx(V,{}),t.jsx(u,{initialValue:n,onChange:i,language:"json",prettierConfigOverride:h})]})},G=()=>{const e=o(J),s=o(j),a=g(),[n,r]=c.useState({language:"javascript",data:""});c.useEffect(()=>{console.warn("Generating new auto complete"),r((()=>{const d=JSON.parse(s);let x="";for(const[w,S]of Object.entries(d))x+=`this.${w} = ${JSON.stringify(S)};`;return{language:"javascript",data:x}})())},[s]);const f=m(i=>{i&&a(R(i))},1e3);return t.jsx(u,{initialValue:e,prettierConfigOverride:y,onChange:f,addToAutoComplete:n})},H=()=>{const e=o(O),s=g(),a=m(n=>{n&&s(T(n))},1e3);return t.jsx(u,{enableFormat:!1,language:"text",initialValue:e,onChange:a})},M=()=>{const e=o(b),[s,a]=c.useState("{}");return c.useEffect(()=>{console.warn("Generating new prettified transformation result"),(async()=>{try{const r=await A(e,h);a(r)}catch(r){console.warn("Error prettifying transformation result",r),a(e)}})()},[e]),t.jsx(u,{initialValue:s,prettierConfigOverride:h,language:"json",readonly:!0})},q="_container_26rc8_1",K="_dataButton_26rc8_9",L="_editorsContainer_26rc8_14",P="_codeEditorContainer_26rc8_21",W="_transformResult_26rc8_21",l={container:q,dataButton:K,editorsContainer:L,codeEditorContainer:P,transformResult:W},Y=()=>{const[e,s]=c.useState(!1);return t.jsxs("div",{className:l.container,children:[t.jsxs(F,{variant:"extended",className:l.dataButton,onClick:()=>s(!0),children:[t.jsx(z,{sx:{mr:1}}),"Data"]}),t.jsx($,{isOpen:e,onCloseClick:()=>s(!1)}),t.jsxs("div",{className:l.editorsContainer,children:[t.jsx(p,{defaultSize:{height:"80vh",width:"47vw"},className:l.codeEditorContainer,children:t.jsx(G,{})}),t.jsx(p,{defaultSize:{height:"80vh",width:"47vw"},children:t.jsx(M,{})}),t.jsx(p,{defaultSize:{height:"10vh",width:"95vw"},children:t.jsx(H,{})})]})]})};export{Y as TransformationEditorV2};
