import{c as _,y as o,z as j,A as h,f as v,j as t,I as D,n as g,o as m,B as E,D as J,r as c,m as y,E as R,F as O,H as T,K as b,t as A}from"./index-c1d2c8dc.js";import{D as k,d as B,a as N,b as V,c as z,e as I}from"./DataObject-75c7bc56.js";import{C as u,R as p}from"./CodeEditor-d901fd05.js";const C="45vw",$=_("div")(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(0,1),...e.mixins.toolbar,justifyContent:"flex-start"})),F=e=>{const{isOpen:s,onCloseClick:a}=e,n=o(j),r=h(),f=v(),i=m(d=>{d&&r(E(d))},1e3);return t.jsxs(k,{sx:{width:C,flexShrink:0,"& .MuiDrawer-paper":{width:C}},variant:"persistent",anchor:"right",open:s,children:[t.jsx($,{children:t.jsx(D,{onClick:a,children:f.direction==="rtl"?t.jsx(B,{}):t.jsx(N,{})})}),t.jsx(V,{}),t.jsx(u,{initialValue:n,onChange:i,language:"json",prettierConfigOverride:g})]})},G=()=>{const e=o(J),s=o(j),a=h(),[n,r]=c.useState({language:"javascript",data:""});c.useEffect(()=>{console.warn("Generating new auto complete"),r((()=>{const d=JSON.parse(s);let x="";for(const[w,S]of Object.entries(d))x+=`this.${w} = ${JSON.stringify(S)};`;return{language:"javascript",data:x}})())},[s]);const f=m(i=>{i&&a(R(i))},1e3);return t.jsx(u,{initialValue:e,prettierConfigOverride:y,onChange:f,addToAutoComplete:n})},H=()=>{const e=o(O),s=h(),a=m(n=>{n&&s(T(n))},1e3);return t.jsx(u,{enableFormat:!1,language:"text",initialValue:e,onChange:a})},K=()=>{const e=o(b),[s,a]=c.useState("{}");return c.useEffect(()=>{console.warn("Generating new prettified transformation result"),(async()=>{try{const r=await A(e,g);a(r)}catch(r){console.warn("Error prettifying transformation result",r),a(e)}})()},[e]),t.jsx(u,{initialValue:s,prettierConfigOverride:g,language:"json",readonly:!0})},M="_container_26rc8_1",P="_dataButton_26rc8_9",W="_editorsContainer_26rc8_14",q="_codeEditorContainer_26rc8_21",L="_transformResult_26rc8_21",l={container:M,dataButton:P,editorsContainer:W,codeEditorContainer:q,transformResult:L},Y=()=>{const[e,s]=c.useState(!1);return t.jsxs("div",{className:l.container,children:[t.jsxs(z,{variant:"extended",className:l.dataButton,onClick:()=>s(!0),children:[t.jsx(I,{sx:{mr:1}}),"Data"]}),t.jsx(F,{isOpen:e,onCloseClick:()=>s(!1)}),t.jsxs("div",{className:l.editorsContainer,children:[t.jsx(p,{defaultSize:{height:"80vh",width:"47vw"},className:l.codeEditorContainer,children:t.jsx(G,{})}),t.jsx(p,{defaultSize:{height:"80vh",width:"47vw"},children:t.jsx(K,{})}),t.jsx(p,{defaultSize:{height:"10vh",width:"95vw"},children:t.jsx(H,{})})]})]})};export{Y as TransformationEditorV2};
